<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P6327VK4');</script>
<!-- End Google Tag Manager -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Joybringers - Events</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="css/bootstrap.min.css">

  <!-- Your main template CSS -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Your brand overrides -->
  <link rel="stylesheet" href="css/custom.css">

  <style>
    /* Sticky Footer Layout */
    html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
    }
    nav.navbar {
      flex-shrink: 0;
    }
    main {
      flex: 1; /* Pushes footer down */
    }
    footer {
      flex-shrink: 0;
    }
  </style>
  <style>
    body { background-color: #f9f9f9; font-family: 'Open Sans', sans-serif; }
    .event-card { border: 1px solid #eee; border-radius: 8px; overflow: hidden; margin-bottom: 30px; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .event-card img { width: 100%; height: 220px; object-fit: cover; }
    .modal-dialog { max-width: 700px; }
    .modal-body label { font-weight: 600; margin-bottom: 5px; }
    .modal-body .form-group { margin-bottom: 15px; }
    .thank-you-message { display: none; text-align: center; padding: 20px; font-weight: bold; color: green; }
    footer { background:#006526; color:#fff; padding:30px 0; font-size:14px; }
    .footer-social a { display:inline-flex; align-items:center; justify-content:center; margin:0 5px; width:36px; height:36px; border-radius:50%; color:#fff; font-size:16px; transition:0.3s; }
    .footer-social a:hover { opacity:0.8; }
    .footer-social a.facebook { background:#1877F2; }
    .footer-social a.instagram { background:#E4405F; }
    .footer-social a.linkedin { background:#0A66C2; }
    .footer-social a.twitter { background:#1DA1F2; }
    .footer-social a.tiktok { background:#000; }
  </style>
  <link rel="icon" type="image/x-icon" href="favicon.ico">

</head>
<body>
   <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P6327VK4"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div class="page-wrapper">
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">Joybringers</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav">
      <span class="oi oi-menu"></span> Menu
    </button>
    <div class="collapse navbar-collapse" id="ftco-nav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
        <li class="nav-item"><a href="/about" class="nav-link">About</a></li>
        <li class="nav-item"><a href="/what-we-do" class="nav-link">What We Do</a></li>
        <li class="nav-item active"><a href="/events" class="nav-link">Events</a></li>
        <li class="nav-item"><a href="/volunteer" class="nav-link">Volunteer</a></li>
<!-- <li class="nav-item"><a href="partner" class="nav-link">Partnerships</a></li>-->
         <li class="nav-item"><a href="/donate" class="nav-link">Donate</a></li>
        <li class="nav-item"><a href="/contact" class="nav-link">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>
<!-- END nav -->

<!-- ✅ Event Section -->
<section class="ftco-section">
  <div class="container">
    <h2 class="text-center mb-5">Upcoming Events</h2>
    <div class="row" id="upcoming-events"></div>

    <h2 class="text-center mb-5 mt-5">Past Events</h2>
    <div class="row" id="past-events"></div>
  </div>
</section>

<!-- ✅ Registration Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 id="registerModalLabel" class="modal-title">Register for Event</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">&times;</button>
      </div>

     <form id="eventRegisterForm" action="https://api.web3forms.com/submit" method="POST">
  <!-- Web3Forms setup -->
  <input type="hidden" name="access_key" value="ca5bab91-e33d-4ab7-bc17-45becec07004">

  <!-- ✅ Disable Web3Forms auto-responder (no duplicate emails) -->
  <input type="hidden" name="email_template" value="none">
  <input type="hidden" name="from_name" value="Joybringers Charity">

  <!-- Event info (auto-filled by JS when modal opens) -->
  <input type="hidden" name="event_name" id="event_name">
  <input type="hidden" name="event_date" id="event_date">
  <input type="hidden" name="event_time" id="event_time">
  <input type="hidden" name="event_location" id="event_location">


        <div class="modal-body">
          <div class="container">
            <div class="row">
              <div class="col-md-6 form-group">
                <label>First Name *</label>
                <input type="text" name="first_name" class="form-control" required>
              </div>
              <div class="col-md-6 form-group">
                <label>Last Name *</label>
                <input type="text" name="last_name" class="form-control" required>
              </div>
              <div class="col-md-6 form-group">
                <label>Email *</label>
                <input type="email" name="email" class="form-control" required>
              </div>
              <div class="col-md-6 form-group">
                <label>Phone Number</label>
                <input type="text" name="phone" class="form-control">
              </div>
              <div class="col-md-6 form-group">
                <label>Gender *</label>
                <select name="gender" class="form-control" required>
                  <option value="">Please Select</option>
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </div>
              <div class="col-md-6 form-group">
                <label>How Many Person is attending *</label>
                <select name="number_of_persons" class="form-control" required>
                  <option value="">Please Select</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>6+</option>
                </select>
              </div>
             <!--  <div class="col-md-6 form-group">
                <label>Age Range *</label>
                <select name="age_range" class="form-control" required>
                  <option value="">Please Select</option>
                  <option>7 - 11</option>
                  <option>12 - 15</option>
                  <option>16 - 25</option>
                  <option>26 & Above</option>
                </select>
              </div> -->
              <div class="col-md-6 form-group">
                <label>Location *</label>
                <select name="location" class="form-control" required onchange="toggleOtherLocation(this)">
                  <option value="">Select Area</option>
                  <option>Newcastle</option>
                  <option>Sunderland</option>
                  <option>Gateshead</option>
                  <option>Durham</option>
                  <option>North Shields</option>
                  <option>South Shields</option>
                  <option>Middlesbrough</option>
                  <option>Stockton</option>
                  <option>Other</option>
                </select>
              </div>
              <div class="col-md-6 form-group d-none" id="otherLocationGroup">
                <label>Specify Location</label>
                <input type="text" name="other_location" class="form-control">
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Submit Registration</button>
        </div>
        <div class="thank-you-message" id="thankYouMessage">
          ✅ Thank you for registering! Check your email for event details.
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ✅ Footer -->
  <footer style="background-color:#006526; color:#fff; padding:40px 0; font-size:14px;">
    <div class="container">
      <div class="row align-items-center">
        <!-- Left Column -->
        <div class="col-md-4 mb-4 mb-md-0 text-center text-md-left">
          <p>
            Email us: <a href="mailto:info@joybringer.org.uk" style="color:#fff;">info@joybringer.org.uk</a><br>
            Call us: <a href="tel:07780105816" style="color:#fff;">07780105816</a>
          </p>
          <p>
            <strong>JOYBRINGERS LTD</strong><br>
            (Company No. 15400265)<br>
            Registered Charity Number 1212606
          </p>
        </div>
        <!-- Middle Column -->
        <div class="col-md-4 mb-4 mb-md-0 text-center">
          <img src="images/partners/ncvo-logo.jpg" alt="NCVO Member" style="max-height:80px;">
        </div>
        <!-- Right Column -->
        <div class="col-md-4 mb-4 mb-md-0 text-center text-md-centre">
          <p>Follow us | <a href="contact" style="color:#fff;">Contact Us</a></p>
          <div class="footer-social">
  <a href="https://www.facebook.com/Joybringero/" target="_blank" class="facebook">
    <i class="fab fa-facebook-f"></i>
  </a>
  <a href="https://www.instagram.com/joybringerscharity/" target="_blank" class="instagram">
    <i class="fab fa-instagram"></i>
  </a>
  <a href="https://www.linkedin.com/company/joybringers/?viewAsMember=true" target="_blank" class="linkedin">
    <i class="fab fa-linkedin-in"></i>
  </a>
  <a href="https://x.com/JoybringersC" target="_blank" class="twitter">
    <i class="fab fa-twitter"></i>
  </a>
  <a href="https://www.tiktok.com/@joybringersc?_t=ZN-8xSqI9AImOM&_r=1" target="_blank" class="tiktok">
    <i class="fab fa-tiktok"></i>
  </a>
</div>

          <p class="mt-2">
            <a href="/terms" style="color:#fff;">Terms of use</a> /
            <a href="/cookies" style="color:#fff;">Cookies</a> /
            <a href="/privacy" style="color:#fff;">Privacy</a>
          </p>
        </div>
      </div>
      <!-- Bottom -->
      <div class="row mt-4">
        <div class="col text-center">
          <p style="margin:0;">©2025 Joybringers. All Rights Reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- ✅ Social Icons Styling -->
  <style>
    .footer-social a {
  display: inline-flex;        /* centers child icon */
  align-items: center;
  justify-content: center;
  margin: 0 5px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  text-align: center;
  color: #fff;
  font-size: 18px;
  transition: 0.3s;
}

.footer-social a:hover {
  opacity: 0.8;
}

.footer-social a.facebook { background: #1877F2; }
.footer-social a.instagram { background: #E4405F; }
.footer-social a.linkedin { background: #0A66C2; }
.footer-social a.twitter  { background: #1DA1F2; }
.footer-social a.tiktok   { background: #000000; }
  </style>

<!-- Loader -->
  <div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
      <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
      <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#007A4D"/>
    </svg>
  </div>

  <!-- ✅ JS Files -->
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="js/main.js"></script>

<!-- ✅ Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<script>
const events = [
  { title: "ONE MONTH CODING & Data CLASS", date: "2025-11-01", time: "10:00 AM", venue: "Suite 3, Neon, Quorum Business Park", description: "A one-month hands-on coding and data science class for ages 7 to 15 years.", image: "images/events/code.png" },
  { title: "BANQUET & AWARDS NIGHT", date: "2025-12-13", time: "18:00 PM", venue: "West Denton Community Centre, Hillhead Rd, West Denton, Newcastle upon Tyne NE5 1DN", description: "Celebrating excellence, impact and joy. You are invited. Dress code: Corporate/Black Tie", image: "images/banq.jpg" },
  { title: "Volunteer Hangout", date: "2026-02-21", time: "10:00 AM", venue: "Suite 3, Neon, Quorum Business Park", description: "A Day set aside for volunteers to come together, have fun and network", image: "images/events/bg_3.jpg" },
  { title: "One Day Free Multiskilled Workshop (Scratch Coding Bootcamp)", date: "2025-04-17", time: "10:00 AM - 4:00 PM", venue: "Neon, Quorum Business Park", description: "A hands-on Scratch coding bootcamp for young minds.", image: "images/events/cv.png" },
  { title: "Outdoor Picnic & Games for Young People", date: "2025-05-31", time: "12:00 PM - 5:00 PM", venue: "Leazes Park, Newcastle", description: "Relax and play! A fun day outdoors with games and food.", image: "images/events/event7.jpg" },
  { title: "One Month Free French/German Lesson", date: "2025-06-28", time: "10:00 AM - 12:00 PM", venue: "Online (Zoom)", description: "Learn French or German in a fun and engaging way.", image: "images/events/event-1.jpg" },
  { title: "Explore the NE: Excursion to Beamish", date: "2025-07-19", time: "9:00 AM - 6:00 PM", venue: "Beamish, County Durham", description: "Explore the North East's cultural past with us.", image: "images/events/an.jpg" },
  { title: "Joybringers FUN FAIR", date: "2025-08-16", time: "11:00 AM - 5:00 PM", venue: "Neon, Quorum Business Park", description: "Food, games, prizes, and fun for all ages.", image: "images/events/event7.jpg" },
  { title: "Explore the NE: Excursion to Alnwick Gardens", date: "2025-08-19", time: "9:30 AM - 6:30 PM", venue: "Alnwick, Northumberland", description: "A day of nature, learning, and exploration.", image: "images/events/event-2.jpg" },
  { title: "Practical Multiskilled Training for Young People", date: "2025-10-04", time: "10:00 AM - 4:00 PM", venue: "Neon, Quorum Business Park", description: "Hands-on training across key youth skills.", image: "images/events/event7.jpg" },
  { title: "Multiskilled Workshop", date: "2024-08-18", time: "10:00 AM - 4:00 PM", venue: "Neon, Quorum Business Park", description: "Develop versatile skills through our practical workshop.", image: "images/events/code.png" },
  { title: "CV Clinic & Mock Interview", date: "2024-07-20", time: "11:00 AM - 3:00 PM", venue: "Neon, Quorum Business Park", description: "Polish your CV and get interview-ready with pros.", image: "images/events/cv.png" }
];

function formatDate(dateStr) {
  const d = new Date(dateStr);
  return d.toDateString();
}

// ✅ Updated function — only show Register button for upcoming events
function eventCard(e, isUpcoming) {
  return `
    <div class="col-md-4 d-flex">
      <div class="event-card">
        <img src="${e.image}" alt="${e.title}">
        <div class="p-3">
          <h5>${e.title}</h5>
          <p><i class="fa fa-calendar"></i> ${formatDate(e.date)}</p>
          <p><i class="fa fa-clock"></i> ${e.time}</p>
          <p><i class="fa fa-map-marker"></i> ${e.venue}</p>
          <p>${e.description}</p>
          ${isUpcoming ? `
            <button class="btn btn-success btn-sm" data-toggle="modal" data-target="#registerModal"
              data-title="${e.title}" data-date="${e.date}" data-time="${e.time}" data-location="${e.venue}">
              Register Now
            </button>` : `
            <span class="badge badge-secondary">Event Ended</span>
          `}
        </div>
      </div>
    </div>`;
}

$(document).ready(() => {
  const today = new Date();
  events.forEach(e => {
    const eventDate = new Date(e.date);
    const isUpcoming = eventDate >= today;
    const section = isUpcoming ? "#upcoming-events" : "#past-events";
    $(section).append(eventCard(e, isUpcoming));
  });

  // Modal and form handling remain the same
  $('#registerModal').on('show.bs.modal', function(event) {
    const b = $(event.relatedTarget);
    $('#event_name').val(b.data('title'));
    $('#event_date').val(b.data('date'));
    $('#event_time').val(b.data('time'));
    $('#event_location').val(b.data('location'));
    $('#thankYouMessage').hide();
  });


});

function toggleOtherLocation(sel) {
  const box = document.getElementById('otherLocationGroup');
  box.classList.toggle('d-none', sel.value !== "Other");
}
</script>


<!-- ✅ EmailJS Integration + Google Sheets + Web3Forms Hybrid -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function() {
  // Initialize EmailJS
  emailjs.init("_TGXKABP5E9-_Sxzn");
})();

// ✅ Your Google Apps Script Web App URL
const scriptURL = "https://script.google.com/macros/s/AKfycbwWSQvN9Oq-60EWsh83EDbwyTw2jZeHUv6ckq3iSAGUZ1GEpwFPE5sDwcFG8YqLqMugSQ/exec";

document.getElementById("eventRegisterForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const form = this;
  const thankYou = document.getElementById("thankYouMessage");

  // ✅ Step 1: Send to Web3Forms (Admin Notification)
  fetch("https://api.web3forms.com/submit", {
    method: "POST",
    body: new FormData(form)
  })
  .then(res => res.json())
  .then(() => {
    console.log("✅ Web3Forms submission successful (admin email sent)");
  })
  .catch(err => console.error("❌ Web3Forms error:", err));

  // ✅ Step 2: Log data to Google Sheets
  const formData = new FormData(form);
  const data = Object.fromEntries(formData.entries());
  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify(data),
    headers: { "Content-Type": "application/json" }
  })
  .then(res => res.json())
  .then(() => console.log("✅ Registration saved to Google Sheets"))
  .catch(err => console.error("❌ Google Sheets error:", err));

  // ✅ Step 3: Send confirmation email to registrant via EmailJS
  emailjs.sendForm('service_m8qsdzk', 'template_l0gb2le', form)
    .then(function() {
      console.log("✅ Confirmation email sent to registrant");

      // ✅ Smooth thank-you message (your preferred style)
      $('#thankYouMessage').fadeIn();
      setTimeout(() => {
        $('#thankYouMessage').fadeOut(600, () => {
          $('#registerModal').modal('hide');
          e.target.reset();
          window.location.reload(); // refresh the page after close
        });
      }, 3000);

      // Optional: small alert confirmation
      // alert("✅ Thank you for registering! A confirmation email has been sent.");
    }, function(error) {
      console.error("❌ EmailJS send failed:", error);
      alert("Oops! Something went wrong. Please try again.");
    });
});
</script>


</body>
</html>
